---
title: How to set up your commit linting
author: Samuel Jensen
publishedAt: 2022-2-15
summary: Demonstrating step by step the set up process of commitlint and commitizen, to help construct a better development enviroment.
---

# Set Up Linting On Commits & Use Commitzen
>_Setup process might vary over time, please refer to related link if encountered problems during installation._

We want our code to be unanimous and formatted, and not only the codes we wrote, but also the commit messages.  
To achieve that, We use git hooks to always lint codes and commit messages,
and use commit interface to easily commit formatted commits!  

there is few packages we need to install:
* **[husky](https://github.com/typicode/husky) - Modern native Git hooks made easy**
* **[lint-staged](https://github.com/okonet/lint-staged) - Run linters against staged git files**
* **[commitlint](https://github.com/conventional-changelog/commitlint) - Lint commit messages**
* **[commitizen](https://github.com/commitizen/cz-cli) - Git command line tool**

_Lucky for us, lint-staged provides a easy way to setup husky and lint-staged itself, so let's start here!_


## Lint-staged & husky
> This section is mostly copied from [lint-staged's README](https://github.com/okonet/lint-staged/blob/master/README.md).

The fastest way to start using lint-staged is to run the following command in your terminal:

```bash 
npx mrm@2 lint-staged
```

This command will install and configure [husky](https://github.com/typicode/husky) and lint-staged depending on the code quality tools from your project's `package.json` dependencies, so please make sure you install (`npm install --save-dev`) and configure all code quality tools like [Prettier](https://prettier.io) and [ESLint](https://eslint.org) prior to that.

The command above helped us install and configure lint-staged to work.  
However, by default, it is configured to run on root basis.  
You can see in package.json:

```json
"lint-staged": {  
    "*.js": "eslint --cache --fix",
    "*.css": "stylelint --fix"
  }
```

Therefore, we might to do change that.  

```json
"lint-staged": {  
    "{src,tests}/**/*.{js,ts,tsx}": "eslint --cache --fix",
    "src/**/*.{ts,tsx}": "stylelint --fix"
  }
```

lint-staged and husky is all set now, let's move to commitlint.


## Commitlint
> This section is mostly copied from [commitlint's README](https://github.com/conventional-changelog/commitlint/blob/master/README.md).

```sh
# Install commitlint cli and conventional config
npm install --save-dev @commitlint/{config-conventional,cli}
# or
yarn add -D @commitlint/{config-conventional,cli}
# For Windows:
npm install --save-dev @commitlint/config-conventional @commitlint/cli
# or
yarn add -D @commitlint/config-conventional @commitlint/cli
# Configure commitlint to use conventional config
echo "module.exports = {extends: ['@commitlint/config-conventional']}" > commitlint.config.js
```

To lint commits before they are created you can use Husky's `commit-msg` hook:

```sh
# Add hook
npx husky add .husky/commit-msg 'npx --no -- commitlint --edit $1'
# or
yarn husky add .husky/commit-msg 'yarn commitlint --edit $1'
```

OK. We got our commitlint with config-conventional now, and it runs upon every commit!

_By the way, you might notice a ".eslintcache" appeared in the root folder._  
_This seems to be a bug in eslint, we should just add it into ".gitignore"._


# Commitizen
> This section is mostly copied from [Commitizen/cz-cli/README.md](https://github.com/conventional-changelog/commitlint/blob/master/README.md).

To easily commit compliantly, we use Commitizen.  
This one we install globally.

## Installing the command line tool
```bash
npm install -g commitizen
```
### To have it as a global utility, you can do this instead:
```bash
npm install -g commitizen cz-conventional-changelog
echo '{ "path": "cz-conventional-changelog" }' > ~/.czrc
```

## Make project Commitizen-friendly
>*In order to use Commitizen in our project, we need to make it Commitizen-friendly.  
If your project already has a adapter configured, or you have installed Commitizen as a global utility, you can skip this step, go ahead and use Commitizen.*


Initialize project to use the cz-conventional-changelog adapter by typing:
```bash
# npm
commitizen init cz-conventional-changelog --save-dev --save-exact
# or if you are using Yarn
commitizen init cz-conventional-changelog --yarn --dev --exact
```
Or if you want to have Jira smart commits' feature, we can initialize with [cz-conventional-changelog-for-jira-smart-commits](https://github.com/anastariqkhan/cz-conventional-changelog-jira-smart-commits) adapter:
```bash
# npm
commitizen init cz-conventional-changelog-for-jira-smart-commits --save-dev --save-exact
# or if you are using Yarn
commitizen init cz-conventional-changelog-for-jira-smart-commits --yarn --dev --exact

# if you have a global adapter, you might need to add a --force tag.
```

Note that if you want to force install over the top of an old adapter, you can apply the `--force` argument. For more information on this, just run `commitizen help`.

The above command does three things for you.

1. Installs the adapter npm module
2. Saves it to package.json's dependencies or devDependencies
3. Adds the `config.commitizen` key to the root of your **package.json** as shown here:

```json
...
  "config": {
    "commitizen": {
      "path": "cz-conventional-changelog" 
      // or whatever adapter you initialized with
    }
  }
```

Alternatively, commitizen configs may be added to a .czrc file:

```json
{
  "path": "cz-conventional-changelog"
  // or whatever adapter you initialized with
}
```

This just tells Commitizen which adapter we actually want our contributors to use when they try to commit to this repo.

## Commit with Commitizen
Simply use `git cz` or just `cz` instead of `git commit` when committing. You can also use `git-cz`, which is an alias for `cz`.

<br/>

# YOU'RE SET!

***Now you're ready to commit like a pro.***